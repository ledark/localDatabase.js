var localDatabase={isDisponivel:function(){if(typeof localStorage!=='undefined'){return true;}else{return false;}},set:function(data){if(this.isDisponivel()===true){localStorage.setItem('localDatabase',data);}else{document.cookie="localDatabase="+data+"; expires=Thu, 18 Dec 2030 12:00:00 UTC";}},del:function(){if(this.isDisponivel()===true){localStorage.setItem('localDatabase','');}else{document.cookie="localDatabase=; expires=Thu, 01 Jan 1970 00:00:00 UTC";}},get:function(){if(this.isDisponivel()===true){var localDatabaseData=localStorage.getItem('localDatabase');if(localDatabaseData==''||localDatabaseData=='undefined'||localDatabaseData=='null'||localDatabaseData==null){localDatabaseData=JSON.stringify([{campo1:'',campo2:''}]);}
if(localDatabaseData.indexOf('[')!==0){localDatabaseData='['+localDatabaseData+']';}
return localDatabaseData;}else{return this.getCookie("localDatabase");}},getCookie:function(){var cname="localDatabase";var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";},setCookie:function(cvalue,exdays){var cname="localDatabase";var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;},isCookied:function(){if(this.getCookie("localDatabase")!=""){return true;}else{return false;}},setVar:function(nome,valor){var objRaw=this.get();var dados=JSON.parse(objRaw);eval("dados[0]."+nome+" = valor;");this.data=dados[0];localDatabase.set(JSON.stringify(dados));},getVar:function(nome){var objRaw=this.get();var dados=JSON.parse(objRaw);eval("var item = dados[0]."+nome+";");this.data=dados[0];return item;},delVar:function(nome){var objRaw=this.get();var dados=JSON.parse(objRaw);eval("delete dados[0]."+nome+";");this.data=dados[0];localDatabase.set(JSON.stringify(dados));},clear:function(){this.del();this.delVar('campo1');this.delVar('campo2');}};$(function(){$('[localDatabase]').on('change',function(){var nome=$(this).attr('localDatabase');if(nome==''||nome==undefined)nome=$(this).attr('name');var valor=$(this).val();localDatabase.setVar(nome,valor);});$('[localDatabase]').each(function(){var nome=$(this).attr('localDatabase');if(nome==''||nome==undefined)nome=$(this).attr('name');var valor=localDatabase.getVar(nome);$(this).val(valor);});});
